<!-- Import File -->
<%- js("js/highlight.min") %>
<%- js("js/js.min") %>
<%- partial("_partial/nprogress") %>

<% if( theme.js_effect.smoothscroll == true ){ %>
	<%- js("js/smoothscroll") %>
<% } %>

<%- partial("_partial/footer-option") %>

<!-- Swiftye -->
<% if( theme.search.use == "swiftype" ){ %>
	<%- partial("_widget/search-swiftype-js") %>
<% } %>

<!-- Local Search-->
<% if( theme.search.use == "local" ){ %>
	<%- partial("_widget/search-local-js") %>

	<script>
        var inputArea = document.querySelector("#search");
        var getSearchFile = function(){
            var path = "<%= config.search.path %>";
            searchFunc(path, 'search', 'local-search-result');
        }

        inputArea.onfocus = function(){ getSearchFile() }
	</script>
<% } %>

<!-- Window Load-->
<script>
    $(window).load(function() {
        // Post_Toc parent position fixed
        $(".post-toc-wrap").parent(".mdl-menu__container").css("position", "fixed");

        // Daily picture
        <% if(theme.img.daily_pic == "bing") { %>
        var url = '//query.yahooapis.com/v1/public/yql?q=' + encodeURIComponent('select * from json where url=@url') +
            '&url=' + encodeURIComponent('https://www.bing.com/HPImageArchive.aspx?format=js&idx=0&n=8') +
            '&format=json&callback=?';
        $.getJSON(url, function(query) {
            var random = Math.round(Math.random() * 8 - 0.5);
            var img = query.query.results.json.images[random];
            var $dailyPictureContainer = document.getElementById('daily_picture_container');
            $dailyPictureContainer.style.backgroundImage = "url(//www.bing.com" + img.urlbase + "_800x600.jpg)";
            $dailyPictureContainer.setAttribute("title",  img.copyright);
            $dailyPictureContainer.onclick = function() {
                window.open(img.copyrightlink,'_blank');
            };
        });
        <% } %>
    });
</script>

<!-- MathJax Load-->
<% if (page.mathjax){ %>
    <%- partial('_widget/mathjax') %>
<% } %>